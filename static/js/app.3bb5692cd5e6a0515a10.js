webpackJsonp([1],{"+96y":function(e,t,o){"use strict";var a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPopup,expression:"isShowPopup"}],staticClass:"number-keyboard fade",style:{fontSize:e.fontSize+"px"}},[o("transition",{attrs:{name:"slide-up"},on:{"after-enter":e.transitionEnd,"after-leave":e.transitionEnd}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPopupBox,expression:"isShowPopupBox"}],staticClass:"number-keyboard-dialog",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault()}}},[o("div",{staticClass:"number-keyboard-content"},[o("div",{staticClass:"number-keyboard-body"},[o("ul",{staticClass:"list-wrap"},[e._l(9,function(t){return o("li",{key:t,staticClass:"list-item",on:{click:function(o){return e.onKeyDown(e.keyNumberList[t-1],o)}}},[e._v(e._s(e.keyNumberList[t-1]))])}),e._v(" "),o("li",{staticClass:"list-item",class:{"no-bg":e.isInteger},on:{click:function(t){return e.onKeyDown(".",t)}}},[e._v(e._s(e.isInteger?"":"."))]),e._v(" "),o("li",{staticClass:"list-item",on:{click:function(t){return e.onKeyDown(e.keyNumberList[9],t)}}},[e._v(e._s(e.keyNumberList[9]))]),e._v(" "),"popular"==e.styleName?o("li",{staticClass:"list-item slidedown",on:{click:function(t){return e.onSlideDown(t)}}}):o("li",{staticClass:"list-item no-bg delete",on:{click:function(t){return e.onDelete(t)}}})],2)]),e._v(" "),"popular"==e.styleName?o("div",{staticClass:"number-keyboard-operate"},[o("ul",{staticClass:"list-wrap"},[o("li",{staticClass:"list-item delete",on:{click:function(t){return e.onDelete(t)}}}),e._v(" "),o("li",{staticClass:"list-item confirm",on:{click:function(t){return e.onConfirm(t)}}},[e._v(e._s(e.confirmText))])])]):e._e()])])])],1)},staticRenderFns:[]};t.a=a},"+V1i":function(e,t){},"7Otq":function(e,t,o){e.exports=o.p+"static/img/logo.02ef301.png"},Enye:function(e,t){e.exports={name:"numberKeyboard",data:function(){return{fontSize:50,isShowPopup:!1,isShowPopupBox:!1,keyNumberList:[]}},props:{value:{type:Boolean,default:!1},disorder:{type:Boolean,default:!1},styleName:{type:String,default:"popular"},confirmText:{type:String,default:"确定"},isInteger:{type:Boolean,default:!1}},watch:{value:function(e){e?this.show():this.hide()},isShowPopup:function(e){this.$emit("input",e)}},created:function(){this.init(),this.value&&this.show()},methods:{init:function(){var e=[1,2,3,4,5,6,7,8,9,0];if(this.disorder)for(var t=0,o=null,a=null;t<10;)o=e[a=t+parseInt(Math.random()*(10-t),10)],e[a]=e[t],e[t]=o,++t;this.keyNumberList=e,this.computeFontSize()},show:function(){var e=this;this.isShowPopup=!0,this.$nextTick(function(){e.isShowPopupBox=!0})},hide:function(){this.isShowPopupBox=!1},transitionEnd:function(){this.isShowPopupBox||(this.isShowPopup=!1)},computeFontSize:function(){this.fontSize=((document.body.clientWidth>540?540:document.body.clientWidth)/375*50).toFixed(2)},onKeyDown:function(e,t){t.stopImmediatePropagation(),"."===e&&this.isInteger||this.$emit("keyDown",e)},onSlideDown:function(e){this.hide()},onDelete:function(e){e.stopImmediatePropagation(),this.$emit("delete")},onConfirm:function(e){this.$emit("confirm")}}}},MvGc:function(e,t){var o,a={};a.xml={xmlToJson:function(e,t){var o;if(t)for(var a=t.split("->"),i=0;i<a.length;i++)o=0==i?e.getElementsByTagName(a[i])[0]:o.getElementsByTagName(a[i])[0];else o=e;return function e(t){var o={};if(1==t.nodeType){if(t.attributes.length>0){o["@attributes"]={};for(var a=0;a<t.attributes.length;a++){var i=t.attributes.item(a);o["@attributes"][i.nodeName]=i.nodeValue}}}else 3==t.nodeType&&(o=t.nodeValue);if(t.hasChildNodes())for(var n=0;n<t.childNodes.length;n++){var s=t.childNodes.item(n),r=s.nodeName;if(void 0===o[r])o[r]=e(s);else{if(void 0===o[r].length){var l=o[r];o[r]=[],o[r].push(l)}o[r].push(e(s))}}return o}(e=o)},jsonToxml:function(e){if(document.all){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"text/xml")}},a.dateUtil=(o=null,{getThisMonth:function(e){var t=(o=new Date).getMonth()+1;1==(t+"").length&&(t="0"+t);var a=o.getDate();return 1==(a+"").length&&(a="0"+a),-1!=(e=void 0==e?"-":e).indexOf(",")?t+e.split(",")[0]+a+e.split(",")[1]:t+e+a},getThisTime:function(e){var t=(o=new Date).getHours();1==(t+"").length&&(t="0"+t);var a=o.getMinutes();return 1==(a+"").length&&(a="0"+a),t+(e=void 0==e?":":e)+a},getThisWeek:function(e,t){return o=new Date,void 0==e&&(e=o.getDay()),(t=t||"星期")+"日一二三四五六".charAt(e>=7?e%7:e)},formatDateTime:function(e){var t=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var a=e.getDate();a=a<10?"0"+a:a;var i=e.getHours();i=i<10?"0"+i:i;var n=e.getMinutes();n=n<10?"0"+n:n;var s=e.getSeconds();return t+"-"+o+"-"+a+" "+i+":"+n+":"+(s=s<10?"0"+s:s)},formatDateTime2:function(e,t){var o=new Date(e),a=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return a(o.getFullYear());case"MM":return a(o.getMonth()+1);case"mm":return a(o.getMinutes());case"dd":return a(o.getDate());case"HH":return a(o.getHours());case"ss":return a(o.getSeconds())}})}}),a.getCode=function(e,t,o,i){return e+t+o+a.dateUtil.formatDateTime2(i,"yyyyMMddHHmmss")};var i={request:function(e,t,o,a,i,n,s){var r=function(){var e=null;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}();if(null!=r){r.onreadystatechange=function(){4==r.readyState&&(200==r.status||304==r.status?o(r):"function"==typeof a&&a(r))};try{r.open(i,e,!!t),s&&r.setRequestHeader("Content-Type",s),r.send(n)}catch(e){"function"==typeof a&&a()}}else alert("您的浏览器不支持AJAX！")},loadXMLSync:function(e,t,o){i.request(e,!1,t,o,"GET",null)},loadXMLAsync:function(e,t,o){i.request(e,!0,t,o,"GET",null)},loadXMLAsyncPOST:function(e,t,o,a){i.request(e,!0,o,a,"POST",t,"application/x-www-form-urlencoded")}};t._Widget=a,t.Downloader=i,t.commonConfig={MaxWeightErr:.1}},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),i=o("zL8q"),n=o.n(i);o("tvR6"),o("rqsT"),o("XlLT");function s(e){window.cordova.plugins.mmprinter.print_label([{deptname:e.deptname,time:e.time,type:e.type,weight:e.weight,hospital:e.hospital,code:e.code,person:e.person}],function(){},function(){})}window.bleMac=localStorage.getItem("bleMac")||"",window.faya={service_uuid:"49535343-FE7D-4AE5-8FA9-9FAFD205E455",characteristic_uuid_TX:"49535343-8841-43F4-A8D4-ECBE34729BB3",characteristic_uuid_RX:"49535343-1E4D-4BD9-BA61-23C647249616"},window.NW="0",window.printer=function(){},window.printer.init=function(){window.printer.startScan(function(){window.printer.connectFAYA()})},window.printer.onError=function(e){console.log("ERROR: "+e),alert("ERROR: "+e+"请断开蓝牙重新提交"),document.dispatchEvent(window.bluetoothOffEvet)},window.printer.startScan=function(e){window.ble&&window.ble.startScan([],function(t){"FAYA"===t.name&&(window.bleMac=t.id,localStorage.setItem("bleMac",t.id),e&&e(),document.dispatchEvent(window.scanDeviceSuccess))},window.printer.onError),setTimeout(window.printer.stopScan,5e3)},window.printer.stopScan=function(){window.ble&&window.ble.stopScan(function(){""!==window.bleMac&&(document.dispatchEvent(window.contentSuccess),console.log("find out faya success"))},window.printer.onError)},window.printer.connectFAYA=function(){window.ble.setPin("1234",window.printer.setPinSuccess,window.printer.onError)},window.printer.checkIsConnect=function(e){console.log(window.bleMac,"checkIsConnect"),window.ble.isConnected(window.bleMac,function(){e&&e(1)},function(t){e&&e(0)})},window.closeConnect=function(e){console.log(this.bleMac,"closeConnect"),window.ble.disconnect(window.bleMac,function(){e&&e(),console.log("disconnect success")},window.onError)},window.printer.setPinSuccess=function(){window.ble.connect(window.bleMac,function(){window.ble.startNotification(window.bleMac,window.faya.service_uuid,window.faya.characteristic_uuid_RX,window.printer.onNotification,window.onError),console.log("connect success"),document.dispatchEvent(window.bluetoothOnEvet),window.pinSuccess=!0},window.onError)},window.printer.onNotification=function(e){var t=new Uint8Array(e),o=t[1];o===parseInt(71,10)?console.log(String.fromCharCode.apply(null,t).substring(4)):o===parseInt(78,10)?(window.NW=String.fromCharCode.apply(null,t).substring(4),window.NW=window.NW.replace("(kg)",""),window.NW&&(window.NW=parseFloat(window.NW)),console.log(String.fromCharCode.apply(null,t).substring(4))):o===parseInt(84,10)&&console.log(String.fromCharCode.apply(null,t).substring(4))},window.printer.readGW=function(){var e=new Uint8Array(3);e[0]=2,e[1]=65,e[2]=3,window.ble.writeWithoutResponse(window.bleMac,window.faya.service_uuid,window.faya.characteristic_uuid_TX,e.buffer,function(e){console.log("读毛重 success")},window.printer.onError)},window.printer.readNW=function(e){e=e||function(e){console.log("读净重 success")};var t=new Uint8Array(3);t[0]=2,t[1]=66,t[2]=3,window.ble.writeWithoutResponse(window.bleMac,window.faya.service_uuid,window.faya.characteristic_uuid_TX,t.buffer,e,window.printer.onError)},window.printer.readTW=function(){var e=new Uint8Array(3);e[0]=2,e[1]=67,e[2]=3,window.ble.writeWithoutResponse(window.bleMac,window.faya.service_uuid,window.faya.characteristic_uuid_TX,e.buffer,function(e){console.log("读皮重 success")},window.printer.onError)};var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=o("VU/8")({name:"App"},r,!1,function(e){o("+V1i")},null,null).exports,c=o("/ocq"),d=o("mvHQ"),u=o.n(d),p=o("MvGc"),m={name:"myHeader",data:function(){return{hasData:!1,pinSuccess:!1,dialogTableVisible:!1,dialogFormVisible:!1,config:{hospitalName:"xxx医院",hospitalCode:"30323",carCode:"01",carId:"01",baseURL:"http://49.233.184.121:9090/ylfwservice/ylfw.asmx/"},operator:"",operatorId:"",formLabelWidth:"120px",bleMac:"",isBluetooth:!1,changePersion:""}},methods:{goto:function(e){this.$router.push(e)},logout:function(){localStorage.removeItem("operator"),localStorage.removeItem("operatorId"),this.goto("/Login")},save:function(){localStorage.setItem("config",u()(this.config)),this.dialogFormVisible=!1;var e=localStorage.getItem("operator"),t=localStorage.getItem("operatorId");e||t||this.goto("/Login")},conntentBluetooth:function(){var e=this;window.printer.checkIsConnect(function(t){1==t?(e.$message({type:"success",message:"蓝牙重新连接中!"}),window.closeConnect(function(){window.printer.init()})):window.closeConnect(function(){window.printer.init()})})},syncData:function(){var e=this,t=e.config.baseURL+"of_yf_tj";t+="?hospitalCode="+e.config.hospitalCode;var o=localStorage.getItem("waitCollection");if(o){o=JSON.parse(o);for(var a=function(a){p.Downloader.loadXMLAsync(t+"&as_json="+u()(o[a]),function(t){var i=t.response,n=p._Widget.xml.jsonToxml(i),s=p._Widget.xml.xmlToJson(n),r=JSON.parse(s.string["#text"]);a==o.length-1&&1==r.result&&(e.$message({message:"核交数据提交完成！",type:"success"}),localStorage.removeItem("waitCollection"),document.dispatchEvent(window.waitCollectionUpdate))},function(e){})},i=0;i<o.length;i++)a(i)}}},mounted:function(){var e=this,t=JSON.parse(localStorage.getItem("config")),o=localStorage.getItem("operator"),a=localStorage.getItem("operatorId");this.isBluetooth=localStorage.getItem("isBluetooth"),this.changePersion=localStorage.getItem("changePersion")||"",t?((!t||o||a)&&(this.operator=o,this.operatorId=a,this.config=t),document.addEventListener("bluetoothOn",function(e){this.isBluetooth=!0}),document.addEventListener("bluetoothOff",function(t){this.isBluetooth=!1,e.$message({type:"error",message:"蓝牙连接失败，请断开蓝牙，重新连接蓝牙!"})}),document.addEventListener("scanDeviceSuccess",function(t){e.$message({type:"success",message:"蓝牙FAYA连接成功!"})}),document.addEventListener("contentSuccess",function(t){e.$message({type:"success",message:"蓝牙称连接成功!"})}),window.changePersion=document.createEvent("HTMLEvents"),window.changePersion.initEvent("changePersion",!1,!1),document.addEventListener("changePersion",function(t){var o=localStorage.getItem("changePersion");e.changePersion=o}),document.addEventListener("waitCollectionUpdate",function(t){var o=localStorage.getItem("waitCollection");e.hasData=!!o})):this.dialogFormVisible=!0}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"fixed",width:"100%",top:"0","z-index":"9"}},[a("el-header",{staticClass:"clearFixed",attrs:{id:"header"}},[a("span",{attrs:{id:"logo"}},[a("img",{staticStyle:{height:"40px"},attrs:{src:o("7Otq"),alt:""}})]),e._v(" "),a("span",{staticClass:"car"},[e._v(e._s(e.config.carCode)+"车")]),e._v(" "),a("span",{staticClass:"doctor"},[a("i",{staticClass:"el-icon-user"}),e._v("操作员："+e._s(e.operator))]),e._v(" "),a("span",{staticClass:"doctor"},[a("i",{staticClass:"el-icon-user"}),e._v("交接人："+e._s(e.changePersion))]),e._v(" "),a("el-button",{attrs:{id:"logout",plain:"",icon:"el-icon-close"},on:{click:function(t){return e.logout()}}},[e._v("退出")]),e._v(" "),a("el-button",{attrs:{id:"setting",plain:"",icon:"el-icon-setting"},on:{click:function(t){return e.goto("./Login2?act=settings")}}},[e._v("系统设置")]),e._v(" "),a("span",{staticClass:"syncData",on:{click:e.syncData}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.hasData,expression:"!hasData"}],staticClass:"iconfont iconyunshangchuan_o"}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"iconfont blue iconyunshangchuan_o"})]),e._v(" "),a("span",{staticClass:"bluetooth",on:{click:e.conntentBluetooth}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isBluetooth,expression:"!isBluetooth"}],staticClass:"iconfont iconbluetooth-b"}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isBluetooth,expression:"isBluetooth"}],staticClass:"iconfont iconbluetooth"})])],1)],1)},staticRenderFns:[]},g=o("VU/8")(m,f,!1,null,null,null).exports,h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("footer",{staticClass:"footer"},[o("ul",e._l(e.navs,function(t){return o("li",{class:{on:e.$route.name==t.name},on:{click:function(o){return e.goto(t.href)}}},[e._v(e._s(t.name))])}),0)])},staticRenderFns:[]},v=o("VU/8")({name:"myFooter",data:function(){return{isSelect:"/",navs:[{href:"/",name:"首页"},{href:"/updata",name:"核交"},{href:"/intoRoom",name:"入库"},{href:"/outRoom",name:"出库"},{href:"/error",name:"异常"}]}},methods:{goto:function(e){this.$router.push(e)}},created:function(){this.isSelect=this.$route.path}},h,!1,null,null,null).exports,w=(o("kIWX"),{name:"index",components:{myHeader:g,myFooter:v},data:function(){return{seltype:0,selErrtype:0,deptId:"",errType:[{name:"已处理",errtype:0},{name:"未处理",errtype:1}],todayList:{ganran:0,sunshang:0,bingli:0,huaxue:0,yaowu:0},todayTotal:{zzl:0,zsl:0},deplist:[{depid:"12022",name:"超声科",address:"门诊楼1F",num:3}],print:{deptname:"",time:"",type:"",weight:"",hospital:"",code:"",person:""}}},methods:{loadingInstance:function(){return i.Loading.service({fullscreen:!1,background:"rgba(0,0,0,0)"})},inputDeptId:function(e){var t=this,o=localStorage.getItem("deplist");o&&(o=JSON.parse(o)),this.deplistAll=this.deplistAll||o,this.deplistAll.length&&this.deptId&&this.deplistAll.forEach(function(e){e.depid==t.deptId&&t.goto(e.depid,e.name)})},selType:function(e,t){this.seltype=e,this.selErrtype=t,this.getDeptment(this.selErrtype)},goto:function(e,t){var o="/depCollection?deptid="+e+"&deptname="+t;this.$router.push(o)},getDeptment:function(e){var t=this,o=t.config.baseURL+"of_ksxx";o+="?hospitalCode="+t.config.hospitalCode,p.Downloader.loadXMLAsync(o,function(o){var a=o.response,i=p._Widget.xml.jsonToxml(a),n=p._Widget.xml.xmlToJson(i),s=JSON.parse(n.string["#text"]);1==s.result&&(t.deplistAll=s.data,t.deplist=[],s.data.forEach(function(o){0==e?0!=o.num&&t.deplist.push(o):0==o.num&&t.deplist.push(o)}),localStorage.setItem("deplist",u()(s.data)))},function(e){t.$message({type:"error",message:"网络链接失败!"});var o=localStorage.getItem("deplist");t.deplist=JSON.parse(o)})},getData:function(){var e=this,t=e.config.baseURL+"of_yf_flhz";t+="?hospitalCode="+e.config.hospitalCode,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(e.todayList=n.data,e.todayTotal.zzl=n.zzl,e.todayTotal.zsl=n.zsl,localStorage.setItem("todayTotal",u()(e.todayTotal)),localStorage.setItem("todayList",u()(e.todayList)))},function(t){e.$message({type:"error",message:"网络链接失败!"});var o=localStorage.getItem("todayTotal"),a=localStorage.getItem("todayList");e.todayTotal=JSON.parse(o),e.todayList=JSON.parse(a)})},onkeydown:function(e){if(13==e.keyCode)return this.deptId=this.keyval,this.inputDeptId(this.keyval),void(this.keyval="");this.keyval+=String.fromCharCode(e.keyCode)}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.getDeptment(0),this.getData(),this.$refs.inputDept.focus(),this.deptId="",this.keyval="",document.addEventListener("keydown",this.onkeydown)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown)}}),b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"indexPage"}},[o("my-header"),e._v(" "),o("el-main",[o("ul",{staticClass:"lj clearFixed"},[o("li",[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconganranke"})]),e._v(" "),o("span",[e._v("感染性")]),e._v(" "),o("span",[e._v(e._s(e.todayList.ganran))])]),e._v(" "),o("li",[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconsunhuai"})]),e._v(" "),o("span",[e._v("损伤性")]),e._v(" "),o("span",[e._v(e._s(e.todayList.sunshang))])]),e._v(" "),o("li",[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconbingli"})]),e._v(" "),o("span",[e._v("病理性")]),e._v(" "),o("span",[e._v(e._s(e.todayList.bingli))])]),e._v(" "),o("li",[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconhuaxueshiyan"})]),e._v(" "),o("span",[e._v("化学性")]),e._v(" "),o("span",[e._v(e._s(e.todayList.huaxue))])]),e._v(" "),o("li",[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconyao"})]),e._v(" "),o("span",[e._v("药物性")]),e._v(" "),o("span",[e._v(e._s(e.todayList.yaowu))])])]),e._v(" "),o("el-card",{staticClass:"box-card",staticStyle:{"max-height":"360px"},attrs:{id:"card"}},[o("div",{staticClass:"tongji"},[o("div",{staticClass:"todaytotal"},[o("el-input",{ref:"inputDept",staticStyle:{width:"60%",visibility:"hidden",display:"none"},attrs:{autofocus:"true"},model:{value:e.deptId,callback:function(t){e.deptId=t},expression:"deptId"}}),e._v(" "),o("div",{staticClass:"title",staticStyle:{"font-weight":"bold"}},[e._v("今日统计")]),e._v(" "),o("div",{staticClass:"ganran"},[o("span",{staticClass:"num"},[e._v(e._s(e.todayTotal.zzl))]),e._v(" "),o("span",{staticClass:"unit"},[e._v("KG")])]),e._v(" "),o("div",{staticClass:"ganran"},[o("span",{staticClass:"num"},[e._v(e._s(e.todayTotal.zsl))]),e._v(" "),o("span",{staticClass:"unit"},[e._v("袋")])])],1),e._v(" "),o("div",{staticClass:"deplist",staticStyle:{"max-height":"360px","overflow-y":"scroll"}},[o("ul",e._l(e.deplist,function(t){return o("li",[o("div",{on:{click:function(o){return e.goto(t.depid,t.name)}}},[o("div",{staticClass:"d1"},[e._v(e._s(t.name))]),e._v(" "),o("div",{staticClass:"d2"},[e._v(e._s(t.address))]),e._v(" "),o("div",{staticClass:"num on"},[e._v(e._s(t.num))])])])}),0)]),e._v(" "),o("div",{staticClass:"typetab"},e._l(e.errType,function(t,a){return o("el-button",{key:a,class:{on:e.seltype==a},on:{click:function(o){return e.selType(a,t.errtype)}}},[e._v(e._s(t.name))])}),1)])])],1),e._v(" "),o("my-footer")],1)},staticRenderFns:[]},y=o("VU/8")(w,b,!1,null,null,null).exports,_={name:"collection",components:{myHeader:g,myFooter:v},data:function(){return{disabled:!1,pinSuccess:!1,show1:!1,show2:!1,show3:!1,show4:!1,show5:!1,operator:"",operatorId:null,carNo:"02",changePersion:"",todayTotal_d1:{depname:"呼吸科",zzl:0,zsl:0,data:[]},deplist:[],deptname:"",deptid:"",NW:0}},methods:{show:function(e){this.disabled=!1,this.show1=!1,this.show2=!1,this.show3=!1,this.show4=!1,this.show5=!1,this["show"+e]=!this["show"+e],this.NW=0,this.getWeight(e)},printLable:s,open:function(){var e=this,t=this;this.$prompt("请扫描交接二维码","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var o=e.value,a=t.config.baseURL+"of_ryxx";a+="?hospitalCode="+t.config.hospitalCode;var i={id:o};p.Downloader.loadXMLAsync(a+"&as_json="+u()(i),function(e){var o=e.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result?(t.changePersion=n.name,localStorage.setItem("changePersion",n.name),document.dispatchEvent(window.changePersion),t.$message({type:"success",message:"交接人:"+n.name})):t.$message({type:"error",message:"获取交接人失败!"})},function(e){t.$message({type:"error",message:"网络链接失败!"}),t.changePersion=o,localStorage.setItem("changePersion",o),document.dispatchEvent(window.changePersion),t.$message({type:"success",message:"交接人:"+o})})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},deletes:function(){var e=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getWeight:function(){var e=this;function t(t){console.log(t),e.NW=window.NW}window.printer.readNW(function(e){console.log(e)}),setTimeout(function(){window.printer.readNW(t)},1e3)},print:function(e){this.show1=!1,this.show2=!1,this.show3=!1,this.show4=!1,this.show5=!1;var t=this;if(t.changePersion)if(t.NW)if(parseFloat(t.NW)<=0)this.$message({message:"重量错误",type:"error"});else{t.operator;var o=(new Date).getTime(),a=p._Widget.getCode("01",e,t.carNo,o),i=p._Widget.dateUtil.formatDateTime2(o,"yyyy-MM-dd HH:mm:ss"),n=t.config.baseURL+"of_yf_tj";n+="?hospitalCode="+t.config.hospitalCode;var s={type:"01",id:t.operatorId,carNo:t.config.carId,weight:t.NW,code:a,changePersion:t.changePersion,wpType:e,deptid:t.deptid,time:i};p.Downloader.loadXMLAsync(n+"&as_json="+u()(s),function(e){var o=e.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a);1==JSON.parse(i.string["#text"]).result&&(t.$message({message:"提交完成",type:"success"}),t.getdeptData())},function(e){t.$message({type:"error",message:"网络链接失败!已记录本地数据库，请网络连接成功后手动提交！"});var o=localStorage.getItem("todayTotal_d1");o&&(t.todayTotal_d1=JSON.parse(o));var a=localStorage.getItem("waitCollection");"string"==typeof(a=a||[])&&(a=JSON.parse(a)),a.push(s),localStorage.setItem("waitCollection",u()(a)),document.dispatchEvent(window.waitCollectionUpdate)});var r="";switch(e){case 1:r="感染性";break;case 2:r="损伤性";break;case 3:r="病理性";break;case 4:r="化学性";break;case 5:r="药物性"}var l={deptname:"科室："+t.deptname,time:"时间："+i,type:r,weight:"重量："+t.NW+"KG",hospital:"医院："+t.config.hospitalName,code:a,person:"采集人："+t.operator};this.printLable(l),t.disabled=!0}else this.$message({message:"请先称重",type:"error"});else this.open()},goto:function(e){this.$router.push(e)},getdeptData:function(){var e=this,t=e.config.baseURL+"of_cj_sy";t+="?hospitalCode="+e.config.hospitalCode+"&depcode="+e.deptid,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(e.todayTotal_d1=n,n.data.forEach(function(e){switch(e.type){case 1:e.typeName="感染性";break;case 2:e.typeName="损伤性";break;case 3:e.typeName="病理性";break;case 4:e.typeName="化学性";break;case 5:e.typeName="药物性"}}),e.deplist=n.data,localStorage.setItem("todayTotal_d1",u()(n)))},function(t){e.$message({type:"error",message:"网络链接失败!"});var o=localStorage.getItem("todayTotal_d1");o&&(e.todayTotal_d1=JSON.parse(o))})},onkeydown:function(e){var t=this;if(13==e.keyCode){var o=t.config.baseURL+"of_ryxx";o+="?hospitalCode="+t.config.hospitalCode;var a={id:t.keyval};return p.Downloader.loadXMLSync(o+"&as_json="+u()(a),function(e){var o=e.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result?(t.changePersion=n.name,localStorage.setItem("changePersion",n.name),document.dispatchEvent(window.changePersion),t.$message({type:"success",message:"交接人:"+n.name})):t.$message({type:"error",message:"获取交接人失败!"})},function(e){t.$message({type:"error",message:"网络链接失败!"}),t.changePersion=t.keyval,localStorage.setItem("changePersion",t.keyval),document.dispatchEvent(window.changePersion),t.$message({type:"success",message:"交接人:"+t.keyval})}),void(t.keyval="")}t.keyval+=String.fromCharCode(e.keyCode)}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.deptid=this.$route.query.deptid,this.deptname=this.$route.query.deptname,this.changePersion=localStorage.getItem("changePersion")||"",this.getdeptData(),this.keyval="",document.addEventListener("keydown",this.onkeydown)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown),localStorage.setItem("changePersion","")}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{attrs:{id:"depCollPage"}},[o("div",{staticClass:"box1 clearFixed"},[o("div",{staticClass:"exit"},[o("i",{staticClass:"iconfont icondenglu"}),e._v(" "),o("div",{on:{click:function(t){return e.goto("/")}}},[e._v("返回")])]),e._v(" "),o("div",{staticClass:"dep"},[o("div",{staticClass:"dpename"},[e._v(e._s(e.deptname))]),e._v(" "),o("div",{staticClass:"infos"},[o("span",[o("strong",[e._v(e._s(e.todayTotal_d1.zsl))]),e._v(" 袋")]),e._v(" "),o("span",[o("strong",[e._v(e._s(e.todayTotal_d1.zzl))]),e._v(" KG")])])]),e._v(" "),o("div",{staticClass:"deatail"},[o("div",{staticClass:"tabheader"},[o("span",{staticClass:"code"},[o("strong",[e._v("标签条码")])]),e._v(" "),o("span",{staticClass:"type"},[o("strong",[e._v("类型")])]),e._v(" "),o("span",{staticClass:"deptname"},[o("strong",[e._v("科室")])]),e._v(" "),o("span",{staticClass:"weight"},[o("strong",[e._v("重量")])]),e._v(" "),o("span",{staticClass:"time"},[o("strong",[e._v("时间")])]),e._v(" "),o("el-button",{staticStyle:{position:"absolute",right:"185px"},attrs:{icon:"el-icon-folder-add"},on:{click:function(t){return e.goto("/collectionList?deptid="+e.deptid)}}},[e._v("查看全部")])],1),e._v(" "),o("div",{staticClass:"tabbody"},[o("ul",e._l(e.deplist,function(t){return o("li",[o("span",{staticClass:"code"},[e._v(e._s(t.code))]),e._v(" "),o("span",{staticClass:"type"},[e._v(e._s(t.typeName))]),e._v(" "),o("span",{staticClass:"deptname"},[e._v(e._s(t.deptname))]),e._v(" "),o("span",{staticClass:"weight"},[e._v(e._s(t.weight))]),e._v(" "),o("span",{staticClass:"time"},[e._v(e._s(t.time))])])}),0)])]),e._v(" "),o("div",{staticClass:"depjj",on:{click:e.open}},[o("i",{staticClass:"iconfont iconguanliliuzhuanxiezuo"}),e._v(" "),o("div",[e._v("科室交接")])])]),e._v(" "),o("ul",{staticClass:"lj clearFixed"},[o("li",{staticClass:"c1",on:{click:function(t){return e.show(1)}}},[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconganranke"}),e._v(" "),o("span",[e._v("感染性")]),e._v(" "),o("transition",{attrs:{name:"el-fade-in-linear"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show1,expression:"show1"}]},[o("span",{staticClass:"big"},[e._v(e._s(e.NW)+"KG")]),e._v(" "),o("el-button",{staticClass:"btn-print",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.print(1)}}},[e._v("打印标签")])],1)])],1)]),e._v(" "),o("li",{staticClass:"c2",on:{click:function(t){return e.show(2)}}},[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconsunhuai"}),e._v(" "),o("span",[e._v("损伤性")]),e._v(" "),o("transition",{attrs:{name:"el-fade-in-linear"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show2,expression:"show2"}]},[o("span",{staticClass:"big"},[e._v(e._s(e.NW)+"KG")]),e._v(" "),o("el-button",{staticClass:"btn-print",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.print(2)}}},[e._v("打印标签")])],1)])],1)]),e._v(" "),o("li",{staticClass:"c3",on:{click:function(t){return e.show(3)}}},[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconbingli"}),e._v(" "),o("span",[e._v("病理性")]),e._v(" "),o("transition",{attrs:{name:"el-fade-in-linear"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show3,expression:"show3"}]},[o("span",{staticClass:"big"},[e._v(e._s(e.NW)+"KG")]),e._v(" "),o("el-button",{staticClass:"btn-print",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.print(3)}}},[e._v("打印标签")])],1)])],1)]),e._v(" "),o("li",{staticClass:"c4",on:{click:function(t){return e.show(4)}}},[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconhuaxueshiyan"}),e._v(" "),o("span",[e._v("化学性")]),e._v(" "),o("transition",{attrs:{name:"el-fade-in-linear"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show4,expression:"show4"}]},[o("span",{staticClass:"big"},[e._v(e._s(e.NW)+"KG")]),e._v(" "),o("el-button",{staticClass:"btn-print",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.print(4)}}},[e._v("打印标签")])],1)])],1)]),e._v(" "),o("li",{staticClass:"c5",on:{click:function(t){return e.show(5)}}},[o("div",{staticClass:"icons"},[o("i",{staticClass:"iconfont iconyao"}),e._v(" "),o("span",[e._v("药物性")]),e._v(" "),o("transition",{attrs:{name:"el-fade-in-linear"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show5,expression:"show5"}]},[o("span",{staticClass:"big"},[e._v(e._s(e.NW)+"KG")]),e._v(" "),o("el-button",{staticClass:"btn-print",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.print(5)}}},[e._v("打印标签")])],1)])],1)])])])])],1)},staticRenderFns:[]},k=o("VU/8")(_,x,!1,null,null,null).exports,C=o("UCys"),S={name:"updata",components:{myHeader:g,myFooter:v,numberKeyboard:C.default},data:function(){return{isShowAmountKeyboard:!1,loading:!1,dialogVisible:!1,addFlag:!1,show1:!1,show2:!1,show3:!1,input:{code:"",weight:""},operatorId:null,carNo:3,obj:{weight:0},form:{wait:{dai:0,kg:0},updataed:{dai:0,kg:0},error:{dai:0,kg:0}},pushAll:!1,errAll:!1,tableData:[],tableData1:[],tableData2:[],tempTableData:[],tempErrData:[],bleMac:"",faya:{service_uuid:"49535343-FE7D-4AE5-8FA9-9FAFD205E455",characteristic_uuid_TX:"49535343-8841-43F4-A8D4-ECBE34729BB3",characteristic_uuid_RX:"49535343-1E4D-4BD9-BA61-23C647249616"},NW:""}},methods:{printLable:s,loadingInstance:function(){return i.Loading.service({lock:!1,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},withdrawAmountInput:function(e){if(-1!=this.input.weight.indexOf(".")){if("."===e)return void console.error("格式错误!");if(this.input.weight.split(".")[1].length>1)return void console.error("最多只能输入2位小数!")}this.input.weight+=e},closeNumberKeyboard:function(e){1==e?this.isShowAmountKeyboard=!0:(this.isShowAmountKeyboard=!1,this.input.weight&&this.scanCode())},handleClick:function(){console.log("handleClick")},handleClose:function(e){e()},goto:function(e){this.$router.push(e)},submits:function(e){var t=this;if(!t.input.weight&&t.pushAll)return t.$message({type:"error",message:"请输入重量!"}),void(t.pushAll&&t.$refs.btnWeight.focus());t.form.updataed.dai=parseInt(t.form.updataed.dai),t.form.updataed.kg=parseFloat(t.form.updataed.kg),t.input.weight=parseFloat(t.input.weight);var o=(new Date).getTime(),a=p._Widget.dateUtil.formatDateTime2(o,"yyyy-MM-dd HH:mm:ss"),i=this.config.baseURL+"of_yf_tj";i+="?hospitalCode="+t.config.hospitalCode;var n={type:e,id:t.operatorId,time:a,data:t.tempTableData,infactWeight:0};if(("05"==e||t.errAll)&&(n.isError=2,e="02",n.forEach(function(e){e.isError=2})),t.pushAll){var s=t.input.weight-parseFloat(t.config.carWeight),r=t.form.updataed.dai*t.config.diffWeight;if(Math.abs(t.form.updataed.kg-s)>r)return t.$message({type:"error",message:"整车重量超出误差上限"}),this.tableData=this.tempTableData,this.tempTableData=[],this.form.wait.dai=this.form.updataed.dai,this.form.wait.kg=this.form.updataed.kg,this.form.updataed.dai=0,this.form.updataed.kg=0,void(this.pushAll=!1);n.infactWeight=Number(s.toFixed(2)),this.pushAll=!1}for(var l=function(o){d={type:e,id:t.operatorId,time:a,data:[n.data[o]],infactWeight:s},p.Downloader.loadXMLAsync(i+"&as_json="+u()(d),function(a){var i=a.response,s=p._Widget.xml.jsonToxml(i),r=p._Widget.xml.xmlToJson(s);1==JSON.parse(r.string["#text"]).result&&o==n.data.length-1&&("02"==e&&(t.tempTableData=[],t.input.code="",t.input.weight="",t.$message({type:"success",message:"核交成功!"})),"05"==e&&t.$message({type:"success",message:"加入异常成功!"}))},function(e){t.$message({type:"error",message:"网络链接失败!"})})},c=0;c<n.data.length;c++){var d;l(c)}},submitErr:function(){var e=this;e.form.error.dai=parseInt(e.form.error.dai),e.form.error.kg=parseFloat(e.form.error.kg);var t=(new Date).getTime(),o=p._Widget.dateUtil.formatDateTime2(t,"yyyy-MM-dd HH:mm:ss"),a=this.config.baseURL+"of_yf_tj";a+="?hospitalCode="+e.config.hospitalCode;for(var i={type:"02",id:e.operatorId,time:o,data:e.tempErrData,infactWeight:0,isError:2},n=function(t){i.data[t].isError=2,r={type:"02",id:e.operatorId,time:o,data:[i.data[t]],infactWeight:0,isError:2},p.Downloader.loadXMLAsync(a+"&as_json="+u()(r),function(o){var a=o.response,n=p._Widget.xml.jsonToxml(a),s=p._Widget.xml.xmlToJson(n);1==JSON.parse(s.string["#text"]).result&&t==i.data.length-1&&(e.tempErrData=[],e.form.error.dai=0,e.form.error.kg=0,e.$message({type:"success",message:"加入异常成功!"}))},function(t){e.$message({type:"error",message:"网络链接失败!"})})},s=0;s<i.data.length;s++){var r;n(s)}},save:function(){this.$message({message:"修改完成",type:"success"}),this.dialogVisible=!1},edit:function(e){this.book=e,this.dialogVisible=!0,this.addFlag=!1},addAll:function(){this.tableData.length&&(this.tempTableData=this.tableData,this.tableData=[],this.form.updataed.dai=this.form.wait.dai,this.form.updataed.kg=this.form.wait.kg,this.form.wait.dai=0,this.form.wait.kg=0,this.pushAll=!0)},addErr:function(){this.tableData.length&&(this.tempErrData=this.tableData,this.tableData=[],this.form.error.dai=this.form.wait.dai,this.form.error.kg=this.form.wait.kg,this.form.wait.dai=0,this.form.wait.kg=0,this.errAll=!0)},getData:function(){var e=this,t=(new Date).getTime(),o=(p._Widget.dateUtil.formatDateTime2(t,"yyyy-MM-dd HH:mm:ss"),this.config.baseURL+"of_whj_mx");o+="?hospitalCode="+e.config.hospitalCode;var a={carId:this.config.carId};p.Downloader.loadXMLAsync(o+"&as_json="+u()(a),function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(console.log(n),n.data=n.data.sort(function(e,t){return e.ksmc.localeCompare(t.ksmc)}),n.data.forEach(function(e){switch(e.type){case 1:e.typeName="感染性";break;case 2:e.typeName="损伤性";break;case 3:e.typeName="病理性";break;case 4:e.typeName="化学性";break;case 5:e.typeName="药物性"}}),e.tableData=n.data,e.form.wait.dai=n.zsl,e.form.wait.kg=n.zzl)},function(t){e.$message({type:"error",message:"网络链接失败!"})})},getData2:function(){var e=this,t=this.config.baseURL+"of_yc_mx";t+="?hospitalCode="+e.config.hospitalCode,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(console.log(n),e.tableData2=n.data,e.form.error.dai=n.zsl,e.form.error.kg=n.zzl)},function(t){e.$message({type:"error",message:"网络链接失败!"})})},scanCode:function(){var e=this,t=e.input.code,o=e.input.weight;if(o){e.form.wait.dai=parseInt(e.form.wait.dai),e.form.wait.kg=parseFloat(e.form.wait.kg),e.form.updataed.dai=parseInt(e.form.updataed.dai),e.form.updataed.kg=parseFloat(e.form.updataed.kg);var a=1;e.tableData.forEach(function(i,n){t==i.code&&(a=2,i.weight=parseFloat(i.weight),Math.abs(o-i.weight)<p.commonConfig.MaxWeightErr?(--e.form.wait.dai,++e.form.updataed.dai,e.form.wait.kg=Number((e.form.wait.kg-i.weight).toFixed(2)),e.form.updataed.kg=Number((e.form.updataed.kg+i.weight).toFixed(2)),e.tempTableData.push(i),e.tableData.splice(n,1),e.input.code="",e.input.weight=0):(e.$message({type:"error",message:"重量误差超出限制，已加入异常"}),e.tableData.splice(n,1),e.tempErrData.push(i),++e.form.error.dai,e.form.error.weight=Number((e.form.error.weight+parseFloat(i.weight)).toFixed(2))))}),1!=a||e.pushAll||e.$message({type:"error",message:"条码错误!未在待审核中找到该条码！"})}},getWeight:function(e){setTimeout(function(){var t=e.target;"SPAN"==t.nodeName&&(t=e.target.parentNode),t.blur(),document.body.click()},500);var t=this;function o(e){console.log(e),t.input.weight=window.NW,t.input.weight&&t.scanCode()}window.printer.readNW(function(e){console.log(e)}),setTimeout(function(){window.printer.readNW(o)},1e3)},keyEnter:function(e){console.log("keyEnter")},clear:function(){console.log("clear()"),this.input.code=""},onkeydown2:function(e){if(13==e.keyCode)return console.log("keyCode==13 "+this.keyval),this.input.code=this.keyval,void(this.keyval="");this.keyval+=String.fromCharCode(e.keyCode)}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.getData(),this.keyval="",document.addEventListener("keydown",this.onkeydown2)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown2)}},D={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"updataPage"}},[o("div",{staticClass:"hj hj1"},[o("div",{staticClass:"title"},[e._v("\n          待核交\n          "),o("el-button",{on:{click:e.addErr}},[e._v("异常核交")]),e._v(" "),o("el-button",{on:{click:e.addAll}},[e._v("整车核交")])],1),e._v(" "),o("div",{staticClass:"con clearFixed"},[o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.wait.dai,callback:function(t){e.$set(e.form.wait,"dai",t)},expression:"form.wait.dai"}}),e._v(" "),o("span",[e._v("袋")])],1),e._v(" "),o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.wait.kg,callback:function(t){e.$set(e.form.wait,"kg",t)},expression:"form.wait.kg"}}),e._v(" "),o("span",[e._v("KG")])],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"473px","overflow-y":"scroll"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"code",label:"采集编码",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"科室",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"废物类型",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)]),e._v(" "),o("div",{staticClass:"hj hj2"},[o("div",{staticClass:"title"},[e._v("\n          已核交\n          "),o("el-button",{on:{click:function(t){return e.submits("02")}}},[e._v("核交")])],1),e._v(" "),o("div",{staticClass:"con clearFixed"},[o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updataed.dai,callback:function(t){e.$set(e.form.updataed,"dai",t)},expression:"form.updataed.dai"}}),e._v(" "),o("span",[e._v("袋")])],1),e._v(" "),o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updataed.kg,callback:function(t){e.$set(e.form.updataed,"kg",t)},expression:"form.updataed.kg"}}),e._v(" "),o("span",[e._v("KG")])],1)]),e._v(" "),o("el-form",{staticClass:"demo-form-inline putBox",attrs:{inline:!0,model:e.input},nativeOn:{submit:function(e){e.preventDefault()}}},[o("div",{staticClass:"inputLeft"},[o("el-form-item",{staticClass:"clearFixed",attrs:{label:"条码"}},[o("el-input",{ref:"btnCode",attrs:{disabled:"disabled",placeholder:"条码"},model:{value:e.input.code,callback:function(t){e.$set(e.input,"code",t)},expression:"input.code"}}),e._v(" "),o("el-button",{attrs:{type:"success",round:""},on:{click:e.clear}},[e._v("清除")])],1),e._v(" "),o("el-form-item",{staticClass:"clearFixed",attrs:{label:"重量"}},[o("el-input",{ref:"btnWeight",attrs:{disabled:!e.pushAll,placeholder:"重量"},on:{focus:function(t){return e.closeNumberKeyboard(1)}},model:{value:e.input.weight,callback:function(t){e.$set(e.input,"weight",t)},expression:"input.weight"}}),e._v(" "),o("button",{staticClass:"btn_bule",on:{click:e.getWeight}},[e._v("称重")])],1)],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"400px","overflow-y":"scroll"},attrs:{data:e.tempTableData}},[o("el-table-column",{attrs:{prop:"code",label:"采集编码",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"科室",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"type",label:"废物类型",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"hj hj3"},[o("div",{staticClass:"title"},[e._v("\n          异常\n          "),o("el-button",{on:{click:e.submitErr}},[e._v("核交")])],1),e._v(" "),o("div",{staticClass:"con"},[o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.error.dai,callback:function(t){e.$set(e.form.error,"dai",t)},expression:"form.error.dai"}}),e._v(" "),o("span",[e._v("袋")])],1),e._v(" "),o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.error.kg,callback:function(t){e.$set(e.form.error,"kg",t)},expression:"form.error.kg"}}),e._v(" "),o("span",[e._v("KG")])],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"473px","overflow-y":"scroll"},attrs:{data:e.tempErrData}},[o("el-table-column",{attrs:{prop:"code",label:"采集编码",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"科室",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"废物类型",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)])]),e._v(" "),o("el-dialog",{staticStyle:{"text-align":"left !important"},attrs:{title:e.addFlag?"新增":"修改",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"form",attrs:{"label-width":"80px"}},[o("el-form-item",{staticStyle:{width:"190px"},attrs:{label:"重量"}},[o("el-input",{ref:"inputWeight",attrs:{placeholder:"请输入重量"},model:{value:e.obj.weight,callback:function(t){e.$set(e.obj,"weight",t)},expression:"obj.weight"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"success"},on:{click:function(t){return e.save()}}},[e._v("提交")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),o("number-keyboard",{on:{confirm:function(t){return e.closeNumberKeyboard(0)},delete:function(t){e.input.weight&&(e.input.weight=e.input.weight.substring(0,e.input.weight.length-1))},keyDown:e.withdrawAmountInput},model:{value:e.isShowAmountKeyboard,callback:function(t){e.isShowAmountKeyboard=t},expression:"isShowAmountKeyboard"}})],1),e._v(" "),o("my-footer")],1)},staticRenderFns:[]},N=o("VU/8")(S,D,!1,null,null,null).exports,L={name:"intoRoom",components:{myHeader:g,myFooter:v},data:function(){return{loading:!1,operator:"",operatorId:null,input:{BoxCode:"",code:""},boxType:null,form:{updata:{dai:0,kg:0},updata1:{dai:0,kg:0}},tableData:[],tempTableData:[],errAll:!1}},methods:{getData:function(e){var t=this,o=this.config.baseURL+"of_wrk_mx";o+="?hospitalCode="+t.config.hospitalCode,p.Downloader.loadXMLAsync(o,function(o){var a=o.response,i=p._Widget.xml.jsonToxml(a),n=p._Widget.xml.xmlToJson(i),s=JSON.parse(n.string["#text"]);if(1==s.result){t.form.updata.dai=s.zsl,t.form.updata.kg=s.zzl;var r=[];s.data.forEach(function(t){switch(t.type){case 1:t.typeName="感染性";break;case 2:t.typeName="损伤性";break;case 3:t.typeName="病理性";break;case 4:t.typeName="化学性";break;case 5:t.typeName="药物性"}e?t.yccl_bz==e&&r.push(t):r.push(t)}),t.tableData=r}},function(e){t.$message({type:"error",message:"网络链接失败!"})})},inputCode:function(e){var t=this;t.input.BoxCode?t.tableData.forEach(function(o,a){o.code==e&&(t.boxType?t.boxType==o.fzh?(t.tempTableData.push(o),t.tableData.splice(a,1),--t.form.updata.dai,++t.form.updata1.dai,t.form.updata.kg=Number((t.form.updata.kg-Number(parseFloat(o.weight).toFixed(2))).toFixed(2)),t.form.updata1.kg=Number((t.form.updata1.kg+Number(parseFloat(o.weight).toFixed(2))).toFixed(2)),t.input.code=""):t.$message({type:"error",message:"该废物类型和已入库废物类型不符!"}):(t.boxType=o.fzh,t.tempTableData.push(o),t.tableData.splice(a,1),--t.form.updata.dai,++t.form.updata1.dai,t.form.updata.kg=Number((t.form.updata.kg-Number(parseFloat(o.weight).toFixed(2))).toFixed(2)),t.form.updata1.kg=Number((t.form.updata1.kg+Number(parseFloat(o.weight).toFixed(2))).toFixed(2)),t.input.code=""))}):this.$message({type:"error",message:"请扫描入库条码!"})},submits:function(e){var t=this;if(setTimeout(function(){var t=e.target;"SPAN"==t.nodeName&&(t=e.target.parentNode),t.blur(),document.body.click()},500),0!=this.tempTableData.length){var o=t.config.baseURL+"of_yf_tj";o+="?hospitalCode="+t.config.hospitalCode;var a=(new Date).getTime(),i=p._Widget.dateUtil.formatDateTime2(a,"yyyy-MM-dd HH:mm:ss"),n={type:"03",id:t.operatorId,time:i,codeBox:t.input.BoxCode,data:t.tempTableData};if(t.errAll&&(n.isError=2,n.data.forEach(function(e){e.isError=2})),n.data.length)for(var s=function(e){l={type:"03",id:t.operatorId,time:i,codeBox:t.input.BoxCode,data:[n.data[e]]},p.Downloader.loadXMLAsync(o+"&as_json="+u()(l),function(o){var a=o.response,i=p._Widget.xml.jsonToxml(a),s=p._Widget.xml.xmlToJson(i);1==JSON.parse(s.string["#text"]).result&&e==n.data.length-1&&(t.$message({type:"success",message:"入库成功!"}),t.tempTableData=[],t.form.updata1.dai=0,t.form.updata1.kg=0,t.input.BoxCode="",t.input.code="",t.boxType="")},function(e){t.$message({type:"error",message:"网络链接失败!"})})},r=0;r<n.data.length;r++){var l;s(r)}}else this.$message({type:"error",message:"请扫描待出库条码!"})},onkeydown:function(e){if(13==e.keyCode)return 19!=this.keyval.length&&(this.input.BoxCode=this.keyval,this.keyval=""),void(19==this.keyval.length&&(this.input.code=this.keyval,this.inputCode(this.input.code),this.keyval=""));this.keyval+=String.fromCharCode(e.keyCode)},addErr:function(){this.tempTableData=this.tableData,this.tableData=[],this.form.updata1.dai=this.form.updata.dai,this.form.updata1.kg=this.form.updata.kg,this.form.updata.dai=0,this.form.updata.kg=0,this.errAll=!0}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.getData(),this.keyval="",document.addEventListener("keydown",this.onkeydown)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown)}},T={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"intoRoomPage"}},[o("div",{staticClass:"hj hj1"},[o("div",{staticClass:"title clearFixed"},[o("span",[e._v("待入库总数")]),e._v(" "),o("el-button",{on:{click:e.addErr}},[e._v("异常入库")])],1),e._v(" "),o("div",{staticClass:"con"},[o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updata.dai,callback:function(t){e.$set(e.form.updata,"dai",t)},expression:"form.updata.dai"}}),e._v(" "),o("span",[e._v("袋")])],1),e._v(" "),o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updata.kg,callback:function(t){e.$set(e.form.updata,"kg",t)},expression:"form.updata.kg"}}),e._v(" "),o("span",[e._v("KG")])],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"473px"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"code",label:"采集编码",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"科室",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"废物类型",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)]),e._v(" "),o("div",{staticClass:"hj hj2"},[o("div",{staticClass:"title clearFixed"},[o("span",[e._v("已入库总数")]),e._v(" "),o("button",{attrs:{id:"btn_submit"},on:{click:e.submits}},[e._v("提交")])]),e._v(" "),o("div",{staticClass:"con"},[o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updata1.dai,callback:function(t){e.$set(e.form.updata1,"dai",t)},expression:"form.updata1.dai"}}),e._v(" "),o("span",[e._v("袋")])],1),e._v(" "),o("div",[o("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:e.form.updata1.kg,callback:function(t){e.$set(e.form.updata1,"kg",t)},expression:"form.updata1.kg"}}),e._v(" "),o("span",[e._v("KG")])],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.input}},[o("el-form-item",{attrs:{label:"入库条码"}},[o("el-input",{attrs:{placeholder:"条码"},model:{value:e.input.BoxCode,callback:function(t){e.$set(e.input,"BoxCode",t)},expression:"input.BoxCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"采集条码"}},[o("el-input",{attrs:{placeholder:"条码"},model:{value:e.input.code,callback:function(t){e.$set(e.input,"code",t)},expression:"input.code"}})],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"347px"},attrs:{data:e.tempTableData}},[o("el-table-column",{attrs:{prop:"code",label:"采集编码",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"科室",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"废物类型",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)])])]),e._v(" "),o("my-footer")],1)},staticRenderFns:[]},E=o("VU/8")(L,T,!1,null,null,null).exports,$={name:"outRoom",components:{myHeader:g,myFooter:v},data:function(){return{loading:!1,dialogVisible:!1,addFlag:!1,restaurants:[],state1:"",state2:"",operatorId:null,license:null,driver:"",obj:{weight:0},input:{code:null,weight:0},tableData:[],tempDate:[],tableData2:[],form1:{num:0,kg:0},form2:{num:0,kg:0}}},methods:{logout:function(){},setting:function(){},handleClose:function(e){},querySearch:function(e,t){var o=this.restaurants.carNo;t(e?o.filter(this.createFilter(e)):o)},querySearchName:function(e,t){var o=this.restaurants.driver;t(e?o.filter(this.createFilterName(e)):o)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},createFilterName:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},getCarInfo:function(){var e=this,t=e.config.baseURL+"of_ck_txxx";p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(e.restaurants={carNo:n.carNo,driver:n.driver})},function(t){e.$message({type:"error",message:"网络链接失败!"})})},handleSelectCarNo:function(e){this.license=e},handleSelectDriver:function(e){this.driver=e},submits:function(){0!=this.tempDate.length?(this.dialogVisible=!0,this.addFlag=!1):this.$message({type:"error",message:"请选择出库项!"})},save:function(){var e=this,t=e.config.baseURL+"of_yf_tj";t+="?hospitalCode="+e.config.hospitalCode;var o=(new Date).getTime(),a=p._Widget.dateUtil.formatDateTime2(o,"yyyy-MM-dd HH:mm:ss"),i={type:"04",id:e.operatorId,time:a,carNo:e.license,driver:e.driver,data:e.tempDate};p.Downloader.loadXMLAsync(t+"&as_json="+u()(i),function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a);1==JSON.parse(i.string["#text"]).result&&(e.tempDate=[],e.form2.num=0,e.form2.kg=0,e.input.code="",e.$message({type:"success",message:"出库成功!"}))},function(t){e.$message({type:"error",message:"网络链接失败!"})}),this.dialogVisible=!1},getData1:function(){var e=this,t=e.config.baseURL+"of_wck_mx";t+="?hospitalCode="+e.config.hospitalCode,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(n.data.forEach(function(e){switch(e.type){case 1:e.typeName="感染性";break;case 2:e.typeName="损伤性";break;case 3:e.typeName="病理性";break;case 4:e.typeName="化学性";break;case 5:e.typeName="药物性"}}),e.tableData=n.data,e.form1.num=n.zsl,e.form1.kg=n.zzl)},function(t){e.$message({type:"error",message:"网络链接失败!"})})},inputCode:function(e){var t=this;e&&this.tableData.length&&t.tableData.forEach(function(o,a){o.code==e&&(t.tableData.splice(a,1),t.tempDate.push(o),parseInt(t.form1.num),parseInt(t.form2.num),--t.form1.num,++t.form2.num,t.form1.kg=Number((t.form1.kg-Number(parseFloat(o.weight).toFixed(2))).toFixed(2)),t.form2.kg=Number((t.form2.kg+Number(parseFloat(o.weight).toFixed(2))).toFixed(2)))})},onkeydown:function(e){if(13==e.keyCode)return this.input.code=this.keyval,this.inputCode(this.keyval),void(this.keyval="");this.keyval+=String.fromCharCode(e.keyCode)}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.getCarInfo(),this.getData1(),this.keyval="",document.addEventListener("keydown",this.onkeydown)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown)}},I={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"outRoomPage"}},[o("div",{staticClass:"waitout"},[o("div",{staticClass:"title clearFixed"},[o("span",[e._v("待出库")])]),e._v(" "),o("div",{staticClass:"con"},[o("div",[o("el-form",{ref:"form",attrs:{model:e.form1,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"周转箱"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form1.num,callback:function(t){e.$set(e.form1,"num",t)},expression:"form1.num"}}),e._v("箱\n                "),o("el-input",{staticClass:"bigger",attrs:{disabled:""},model:{value:e.form1.kg,callback:function(t){e.$set(e.form1,"kg",t)},expression:"form1.kg"}}),e._v("KG\n              ")],1)],1)],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"473px"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"code",label:"编码",width:"240"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)]),e._v(" "),o("div",{staticClass:"outed"},[o("div",{staticClass:"title  clearFixed"},[o("span",[e._v("出库单")]),e._v(" "),o("el-button",{on:{click:e.submits}},[e._v("确认出库")])],1),e._v(" "),o("div",{staticClass:"con"},[o("div",[o("el-form",{ref:"form",attrs:{model:e.form2,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"周转箱"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form2.num,callback:function(t){e.$set(e.form2,"num",t)},expression:"form2.num"}}),e._v("箱\n                "),o("el-input",{staticClass:"bigger",attrs:{disabled:""},model:{value:e.form2.kg,callback:function(t){e.$set(e.form2,"kg",t)},expression:"form2.kg"}}),e._v("KG\n              ")],1)],1)],1)]),e._v(" "),o("div",{staticClass:"detail"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.input},nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",{attrs:{label:"条码"}},[o("el-input",{attrs:{placeholder:"条码",disabled:""},model:{value:e.input.code,callback:function(t){e.$set(e.input,"code",t)},expression:"input.code"}})],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","max-height":"400px"},attrs:{data:e.tempDate}},[o("el-table-column",{attrs:{prop:"code",label:"编码",width:"240"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)])]),e._v(" "),o("el-dialog",{staticStyle:{"text-align":"left !important"},attrs:{title:"确认出库",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"form",attrs:{"label-width":"80px"}},[o("el-row",{staticClass:"demo-autocomplete"},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"sub-title"},[e._v("车牌号")]),e._v(" "),o("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容","value-key":"value"},on:{select:e.handleSelectCarNo},model:{value:e.state1,callback:function(t){e.state1=t},expression:"state1"}})],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"sub-title"},[e._v("接收人员")]),e._v(" "),o("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchName,placeholder:"请输入内容","value-key":"driver"},on:{select:e.handleSelectDriver},model:{value:e.state2,callback:function(t){e.state2=t},expression:"state2"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"success"},on:{click:function(t){return e.save()}}},[e._v("提交")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),o("my-footer")],1)},staticRenderFns:[]},W=o("VU/8")($,I,!1,null,null,null).exports,F={name:"error",components:{myHeader:g,myFooter:v},data:function(){return{active:"/error",loading:!1,seltype:1,selErrtype:1,errType:[{name:"全部",errtype:0},{name:"未处理",errtype:1},{name:"已处理",errtype:2}],tableData:[],dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",form:{ActiveErrtype:""},errorType:[{iserror:"漏夜"},{iserror:"破损"},{iserror:"丢失"},{iserror:"未知"}],tempTableData:[],operator:"",operatorId:null}},methods:{selType:function(e,t){this.seltype=e,this.selErrtype=t,this.getData(this.selErrtype)},goto:function(e){this.$router.push(e)},handleClick:function(e){console.log(e),this.tempTableData=e,this.dialogFormVisible=!0},getData:function(e){var t=this,o=this.config.baseURL+"of_yc_mx";o+="?hospitalCode="+t.config.hospitalCode,p.Downloader.loadXMLAsync(o,function(o){var a=o.response,i=p._Widget.xml.jsonToxml(a),n=p._Widget.xml.xmlToJson(i),s=JSON.parse(n.string["#text"]);if(1==s.result){var r=[];s.data.forEach(function(t){switch(t.type2){case"1":t.typeName="感染性";break;case"2":t.typeName="损伤性";break;case"3":t.typeName="病理性";break;case"4":t.typeName="化学性";break;case"5":t.typeName="药物性"}e?t.yccl_bz==e&&r.push(t):r.push(t)}),t.tableData=r}else t.$message({type:"error",message:"没有异常数据!"})},function(e){t.$message({type:"error",message:"网络链接失败!"})})},getErrorType:function(){var e=this,t=this.config.baseURL+"of_iserror";t+="?hospitalCode="+e.config.hospitalCode,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(e.errorType=n.iserror)},function(t){e.$message({type:"error",message:"网络链接失败!"})})},save:function(){var e=this;if(e.form.ActiveErrtype){var t=(new Date).getTime(),o=p._Widget.dateUtil.formatDateTime2(t,"yyyy-MM-dd HH:mm:ss"),a=this.config.baseURL+"of_yf_tj";a+="?hospitalCode="+e.config.hospitalCode,e.tempTableData.id=e.operatorId,e.tempTableData.t=o,e.tempTableData.errType=e.form.ActiveErrtype,e.tempTableData.type="05",p.Downloader.loadXMLAsync(a+"&as_json="+u()(e.tempTableData),function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a);1==JSON.parse(i.string["#text"]).result&&(e.tempTableData=[],e.dialogFormVisible=!1,e.$message({type:"success",message:"提交成功!"}),e.getData(e.selErrtype))},function(t){e.$message({type:"error",message:"网络链接失败!"})})}else e.$message({type:"error",message:"请选择异常原因!"})}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.getErrorType(),this.getData()}},M={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"errorPage"}},[o("ul",{staticClass:"errType clearFixed"},e._l(e.errType,function(t,a){return o("li",{class:{on:e.seltype==a},on:{click:function(o){return e.selType(a,t.errtype)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])}),0),e._v(" "),o("el-card",{staticClass:"errList"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"460px"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"code",label:"标签条码",width:"240"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ksmc",label:"污秽间",width:"240"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"类型",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ycbz",label:"异常分类",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"time",label:"异常时间",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.handleClick(t.row)}}},[e._v("异常处理")])]}}])})],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"异常原因",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"异常原因","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择异常原因"},model:{value:e.form.ActiveErrtype,callback:function(t){e.$set(e.form,"ActiveErrtype",t)},expression:"form.ActiveErrtype"}},e._l(e.errorType,function(e,t){return o("el-option",{key:t,attrs:{value:e.iserror}})}),1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),o("my-footer",{attrs:{active:e.active}})],1)},staticRenderFns:[]},A=o("VU/8")(F,M,!1,null,null,null).exports;var O={name:"collectionList",components:{myHeader:g,myFooter:v},data:function(){return{active:"/error",car:"",doctor:"",loading:!1,seltype:0,selErrtype:0,tableData:[]}},methods:{printLable:function(e){window.cordova.plugins.mmprinter.print_label([{deptname:e.deptname,time:e.time,type:e.type,weight:e.weight,hospital:e.hospital,code:e.code,person:e.person}],function(){},function(){})},selType:function(e,t){this.seltype=e,this.selErrtype=t,this.getData(this.selErrtype)},goto:function(e){this.$router.push(e)},handleClick:function(e){},getdeptData:function(){var e=this,t=e.config.baseURL+"of_cj_sy";t+="?hospitalCode="+e.config.hospitalCode+"&depcode="+e.deptid,p.Downloader.loadXMLAsync(t,function(t){var o=t.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a),n=JSON.parse(i.string["#text"]);1==n.result&&(n.data.forEach(function(e){switch(e.type){case 1:e.typeName="感染性";break;case 2:e.typeName="损伤性";break;case 3:e.typeName="病理性";break;case 4:e.typeName="化学性";break;case 5:e.typeName="药物性"}}),e.tableData=n.data)},function(t){e.$message({type:"error",message:"网络链接失败!"}),e.tableData=[]})},print:function(e){var t={deptname:"科室："+e.deptname,time:"时间："+e.time,type:e.typeName,weight:"重量："+e.weight,hospital:"医院："+this.config.hospitalName,code:e.code,person:"采集人："+e.person};this.printLable(t)},del:function(e,t){var o=this,a=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o=(new Date).getTime(),i=p._Widget.dateUtil.formatDateTime2(o,"yyyy-MM-dd HH:mm:ss"),n=a.operatorId,s=a.config.baseURL+"of_yf_tj";s+="?hospitalCode="+a.config.hospitalCode;var r={type:"06",code:e.code,id:n,time:i};p.Downloader.loadXMLAsync(s+"&as_json="+u()(r),function(e){var o=e.response,i=p._Widget.xml.jsonToxml(o),n=p._Widget.xml.xmlToJson(i);1==JSON.parse(n.string["#text"]).result&&(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"}))},function(e){a.$message({type:"error",message:"网络链接失败!"})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.operator=localStorage.getItem("operator"),this.operatorId=localStorage.getItem("operatorId"),this.deptid=this.$route.query.deptid,this.getdeptData()}},P={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"collectionListPage"}},[o("el-card",{staticClass:"errList"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"460px"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"code",label:"标签条码",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deptname",label:"污秽间",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"类型",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"time",label:"时间",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"person",label:"采集人",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.print(t.row)}}},[e._v("打印")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.del(t.row,t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1)]),e._v(" "),o("my-footer",{attrs:{active:e.active}})],1)},staticRenderFns:[]},R=o("VU/8")(O,P,!1,null,null,null).exports,j=o("mtWM"),J=o.n(j),U={name:"updataDetail",components:{myHeader:g,myFooter:v},data:function(){return{active:"/error",car:"",doctor:"",loading:!1,seltype:0,selErrtype:0,tableData:[]}},methods:{selType:function(e,t){this.seltype=e,this.selErrtype=t,this.getData(this.selErrtype)},goto:function(e){this.$router.push(e)},handleClick:function(e){},getData:function(e){var t=p.baseURL+"targetIDToPoiID?bdid=B000A11DDU&targetID="+e;J.a.get(t).then(function(e){console.log(e),1==e.data.result&&(this.$data.tableData=e.data)}).catch(function(e){console.log(e)})},deletes:function(){var e=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config"))}},z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-header"),e._v(" "),o("el-main",[o("div",{staticClass:"clearFixed",attrs:{id:"updataDetailPage"}},[o("el-card",{staticClass:"errList"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"460px"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"}}),e._v(" "),o("el-table-column",{attrs:{prop:"num",label:"标签条码",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"address",label:"污秽间",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"weight",label:"重量",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"unit",label:"单位",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"date",label:"时间",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deletes("")}}},[e._v("删除")])]}}])})],1)],1)],1)]),e._v(" "),o("my-footer",{attrs:{active:e.active}})],1)},staticRenderFns:[]},B=o("VU/8")(U,z,!1,null,null,null).exports,H=(o("NYxO"),o("mOYH")),V={components:{VueDusionKeyboard:H.b,Paint:H.a},data:function(){return{isCanScanLogin:!0,activeName:"first",formLogin:{id:"",password:"",checkPassword:""},rules:{name:[{validator:function(e,t,o){if(!t)return o(new Error("账户不能为空!"));o()},trigger:"blur"}],password:[{validator:function(e,t,o){if(!t)return o(new Error("密码不能为空!"));o()},trigger:"blur"}]},code:""}},methods:{kkk:function(e){console.log(e)},del:function(e,t){console.log(e),console.log(t)},handleClick:function(e){0==e.index&&(this.code="",this.$refs.input.focus())},login:function(){var e=this,t=this,o=this.formLogin,a={id:o.id,password:o.password};this.$refs.formLogin.validate(function(o){if(!o)return e.$message.error("表单验证失败!"),!1;t.scanLogin(a)})},scanLogin:function(e){var t=this;if(e.id&&e.password){var o=t.config.baseURL+"of_dl";o+="?hospitalCode="+t.config.hospitalCode,p.Downloader.loadXMLAsync(o+"&as_json="+u()(e),function(o){var a=o.response,i=p._Widget.xml.jsonToxml(a),n=p._Widget.xml.xmlToJson(i),s=JSON.parse(n.string["#text"]);1==s.result?(t.operator=s.name,t.operatorId=e.id,localStorage.setItem("operator",s.name),localStorage.setItem("operatorId",e.id),t.$message({type:"success",message:s.name+" 登录成功!"}),t.$router.push("/")):t.$message({type:"success",message:"用户名或密码错误!"})},function(e){t.$message({type:"error",message:"网络链接失败!"})})}},resetForm:function(){console.log("session"),this.$refs.formLogin.resetFields()},onkeydown:function(e){if(13==e.keyCode){console.log("toLocaleLowerCase :"+this.keyval.toLocaleLowerCase());var t=this.keyval.toLocaleLowerCase();return this.scanLogin({id:t.split("p")[0],password:t.split("p")[1]}),void(this.keyval="")}this.keyval+=String.fromCharCode(e.keyCode)}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),this.keyval="",document.addEventListener("keydown",this.onkeydown)},destroyed:function(){this.keyval="",document.removeEventListener("keydown",this.onkeydown)}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"loginPage"}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"text-align":"center"},attrs:{label:"扫码登录",name:"first"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"},{name:"focus",rawName:"v-focus"}],ref:"input",staticStyle:{visibility:"hidden"},attrs:{type:"text",id:"codeInput"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),a("div",[a("img",{attrs:{src:o("eVAA"),width:"200",alt:""}})]),e._v(" "),a("div",[e._v("请用扫码枪扫描登录人二维码")])]),e._v(" "),a("el-tab-pane",{attrs:{label:"账号登录",name:"second"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticStyle:{width:"100%"},attrs:{span:12}},[a("el-form",{ref:"formLogin",attrs:{"label-position":"left","label-width":"80px",model:e.formLogin,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"id"}},[a("el-input",{attrs:{"data-mode":"en_cap"},model:{value:e.formLogin.id,callback:function(t){e.$set(e.formLogin,"id",t)},expression:"formLogin.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"data-mode":"en_cap","show-password":""},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1)],1),e._v(" "),a("vue-dusion-keyboard",{ref:"zzz",staticStyle:{left:"0px",width:"100%"},attrs:{scope:".scope-test"},on:{keyvalue:e.kkk,del:e.del}})],1)},staticRenderFns:[]},K=o("VU/8")(V,X,!1,null,null,null).exports,G={components:{VueDusionKeyboard:H.b,Paint:H.a},data:function(){return{activeName:"second",formLogin:{id:"",password:"",checkPassword:""},rules:{name:[{validator:function(e,t,o){if(!t)return o(new Error("账户不能为空!"));o()},trigger:"blur"}],password:[{validator:function(e,t,o){if(!t)return o(new Error("密码不能为空!"));o()},trigger:"blur"}]},code:""}},methods:{kkk:function(e){console.log(e)},del:function(e,t){console.log(e),console.log(t)},handleClick:function(e){0==e.index&&(this.code="",this.$refs.input.focus())},login:function(){var e=this,t=this,o=this.formLogin,a={id:o.id,password:o.password};this.$refs.formLogin.validate(function(o){if(!o)return e.$message.error("表单验证失败!"),!1;var i=t.config.baseURL+"of_dl";p.Downloader.loadXMLAsync(i+"?as_json="+u()(a),function(e){var o=e.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a);1==JSON.parse(i.string["#text"]).result?(t.$message.success("登录成功!"),t.$router.push("./settings")):t.$message({type:"success",message:"用户名或密码错误!"})},function(e){t.$message({type:"error",message:"网络链接失败!"})})})},resetForm:function(){console.log("session"),this.$refs.formLogin.resetFields()}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config"))}},q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login2",attrs:{id:"loginPage"}},[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"账号登录",name:"second"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{width:"100%"},attrs:{span:12}},[o("el-form",{ref:"formLogin",attrs:{"label-position":"left","label-width":"80px",model:e.formLogin,rules:e.rules}},[o("el-form-item",{attrs:{label:"账号",prop:"id"}},[o("el-input",{attrs:{"data-mode":"en_cap"},model:{value:e.formLogin.id,callback:function(t){e.$set(e.formLogin,"id",t)},expression:"formLogin.id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{"data-mode":"en_cap","show-password":""},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1)],1),e._v(" "),o("vue-dusion-keyboard",{ref:"zzz",staticStyle:{left:"0px",width:"100%"},attrs:{scope:".scope-test"},on:{keyvalue:e.kkk,del:e.del}})],1)},staticRenderFns:[]},Y=o("VU/8")(G,q,!1,null,null,null).exports,Q={components:{VueDusionKeyboard:H.b,Paint:H.a},data:function(){return{activeName:"second",formLogin:{id:"",password:"",checkPassword:""},rules:{name:[{validator:function(e,t,o){if(!t)return o(new Error("账户不能为空!"));o()},trigger:"blur"}],password:[{validator:function(e,t,o){if(!t)return o(new Error("密码不能为空!"));o()},trigger:"blur"}]},code:""}},methods:{goto:function(e){this.$router.push(e)},kkk:function(e){console.log(e)},del:function(e,t){console.log(e),console.log(t)},handleClick:function(e){0==e.index&&(this.code="",this.$refs.input.focus())},login:function(){var e=this,t=this,o=this.formLogin,a={id:o.id,password:o.password};this.$refs.formLogin.validate(function(o){if(!o)return e.$message.error("表单验证失败!"),!1;var i=t.config.baseURL+"of_dl";p.Downloader.loadXMLAsync(i+"?as_json="+u()(a),function(e){var o=e.response,a=p._Widget.xml.jsonToxml(o),i=p._Widget.xml.xmlToJson(a);1==JSON.parse(i.string["#text"]).result?(t.$message.success("退出成功!"),localStorage.removeItem("operator"),localStorage.removeItem("operatorId"),t.goto("/Login")):t.$message({type:"success",message:"用户名或密码错误!"})},function(e){t.$message({type:"error",message:"网络链接失败!"})})})},resetForm:function(){console.log("session"),this.$refs.formLogin.resetFields()}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config"))}},Z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login2",attrs:{id:"loginPage"}},[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"账号登录",name:"second"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{width:"100%"},attrs:{span:12}},[o("el-form",{ref:"formLogin",attrs:{"label-position":"left","label-width":"80px",model:e.formLogin,rules:e.rules}},[o("el-form-item",{attrs:{label:"账号",prop:"id"}},[o("el-input",{attrs:{"data-mode":"en_cap"},model:{value:e.formLogin.id,callback:function(t){e.$set(e.formLogin,"id",t)},expression:"formLogin.id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{"data-mode":"en_cap","show-password":""},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1)],1),e._v(" "),o("vue-dusion-keyboard",{ref:"zzz",staticStyle:{left:"0px",width:"100%"},attrs:{scope:".scope-test"},on:{keyvalue:e.kkk,del:e.del}})],1)},staticRenderFns:[]},ee=o("VU/8")(Q,Z,!1,null,null,null).exports,te={data:function(){var e=this;return{formRegister:{name:"",password:"",checkPassword:""},rules:{name:[{validator:function(e,t,o){if(!t)return o(new Error("账户不能为空!"));o()},trigger:"blur"}],password:[{validator:function(e,t,o){if(!t)return o(new Error("密码不能为空!"));o()},trigger:"blur"}],checkPassword:[{validator:function(t,o,a){return o?o!==e.formRegister.password?a(new Error("两次输入密码不一致!")):void a():a(new Error("再次输入密码不能为空!"))},trigger:"blur"}]}}},methods:{addUser:function(){var e=this,t=this.formRegister,o={name:t.name,password:t.password};this.$refs.formRegister.validate(function(t){if(!t)return e.$message.error("表单验证失败!"),!1;e.$http.post("/api/register",o).then(function(t){if(console.dir(t.data),t.data.error)return e.$message.error(t.data.error),!1;e.$router.push("/login")}).catch(function(t){e.$message.error(""+t.message)})})}},mounted:function(){this.config=JSON.parse(localStorage.getItem("config"))}},oe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"box-card"},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:12}},[o("el-form",{ref:"formRegister",attrs:{"label-position":"left","label-width":"80px",model:e.formRegister,rules:e.rules}},[o("el-form-item",{attrs:{label:"账号",prop:"name"}},[o("el-input",{model:{value:e.formRegister.name,callback:function(t){e.$set(e.formRegister,"name",t)},expression:"formRegister.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{model:{value:e.formRegister.password,callback:function(t){e.$set(e.formRegister,"password",t)},expression:"formRegister.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[o("el-input",{model:{value:e.formRegister.checkPassword,callback:function(t){e.$set(e.formRegister,"checkPassword",t)},expression:"formRegister.checkPassword"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("立即注册")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]},ae=o("VU/8")(te,oe,!1,null,null,null).exports,ie={name:"settings",components:{VueDusionKeyboard:H.b,Paint:H.a},data:function(){return{config:{hospitalName:"xxx医院",hospitalCode:"30323",carCode:"01",carId:"01",baseURL:"http://49.233.184.121:9090/ylfwservice/ylfw.asmx/",carWeight:50,diffWeight:.1},operator:"",operatorId:"",formLabelWidth:"120px"}},methods:{result:function(e){console.log(e)},kkk:function(e){console.log(e)},del:function(e,t){console.log(e),console.log(t)},goto:function(e){this.$router.push(e)},logout:function(){localStorage.removeItem("operator"),localStorage.removeItem("operatorId"),this.goto("/Login")},save:function(){localStorage.setItem("config",u()(this.config)),this.dialogFormVisible=!1;var e=localStorage.getItem("operator"),t=localStorage.getItem("operatorId");e||t?this.goto("/"):this.goto("/Login")}},mounted:function(){var e=JSON.parse(localStorage.getItem("config")),t=localStorage.getItem("operator"),o=localStorage.getItem("operatorId");e?!e||t||o?(this.operator=t,this.operatorId=o,this.config=e):this.goto("/Login"):this.dialogFormVisible=!0}},ne={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"scope-test",staticStyle:{width:"50%",margin:"10px auto 0"},attrs:{id:"settings"}},[o("el-form",{attrs:{model:e.config}},[o("el-form-item",{attrs:{label:"医院名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"en_cap"},model:{value:e.config.hospitalName,callback:function(t){e.$set(e.config,"hospitalName",t)},expression:"config.hospitalName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"医院编码","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"num"},model:{value:e.config.hospitalCode,callback:function(t){e.$set(e.config,"hospitalCode",t)},expression:"config.hospitalCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"车辆编号","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"num"},model:{value:e.config.carCode,callback:function(t){e.$set(e.config,"carCode",t)},expression:"config.carCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"车辆ID","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"num"},model:{value:e.config.carId,callback:function(t){e.$set(e.config,"carId",t)},expression:"config.carId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"接口地址","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"en_cap"},model:{value:e.config.baseURL,callback:function(t){e.$set(e.config,"baseURL",t)},expression:"config.baseURL"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"车体重量","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"num"},model:{value:e.config.carWeight,callback:function(t){e.$set(e.config,"carWeight",t)},expression:"config.carWeight"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"可误差重量","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off","data-mode":"num"},model:{value:e.config.diffWeight,callback:function(t){e.$set(e.config,"diffWeight",t)},expression:"config.diffWeight"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{width:"30%",margin:"0 10px"},on:{click:function(t){return e.goto("/")}}},[e._v("取 消")]),e._v(" "),o("el-button",{staticStyle:{width:"30%",margin:"0 10px"},attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("确 定")])],1),e._v(" "),o("vue-dusion-keyboard",{ref:"zzz",staticStyle:{left:"0px",width:"100%"},attrs:{scope:".scope-test"},on:{keyvalue:e.kkk,del:e.del}})],1)},staticRenderFns:[]},se=o("VU/8")(ie,ne,!1,null,null,null).exports;a.default.use(c.a),a.default.use(n.a);var re=new c.a({routes:[{path:"/",name:"首页",component:y},{path:"/depCollection",name:"科室收集",component:k},{path:"/updata",name:"核交",component:N},{path:"/intoRoom",name:"入库",component:E},{path:"/outRoom",name:"出库",component:W},{path:"/error",name:"异常",component:A},{path:"/collectionList",name:"收集列表",component:R},{path:"/updataDetail",name:"核交明细",component:B},{path:"/Login",name:"登录",component:K},{path:"/Login2",name:"登录",component:Y},{path:"/Login3",name:"登录",component:ee},{path:"/Register",name:"注册",component:ae},{path:"/numberKeyboard",name:"键盘",component:C.default},{path:"/settings",name:"设置",component:se}]});a.default.directive("focus",{inserted:function(e){e.focus()}}),a.default.config.productionTip=!1,window.document.addEventListener("deviceready",function(){new a.default({el:"#app",router:re,components:{App:l},template:"<App/>",mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),window.bluetoothOnEvet=document.createEvent("HTMLEvents"),window.bluetoothOffEvet=document.createEvent("HTMLEvents"),window.scanDeviceSuccess=document.createEvent("HTMLEvents"),window.contentSuccess=document.createEvent("HTMLEvents"),window.waitCollectionUpdate=document.createEvent("HTMLEvents"),window.bluetoothOnEvet.initEvent("bluetoothOn",!1,!1),window.bluetoothOffEvet.initEvent("bluetoothOff",!1,!1),window.scanDeviceSuccess.initEvent("scanDeviceSuccess",!1,!1),window.contentSuccess.initEvent("contentSuccess",!1,!1),window.waitCollectionUpdate.initEvent("waitCollectionUpdate",!1,!1),document.addEventListener("bluetoothOn",function(e){localStorage.setItem("isBluetooth","true")}),document.addEventListener("bluetoothOff",function(e){localStorage.setItem("isBluetooth","false")}),window.setTimeout(function(){window.printer.init()},1e3)}})}),new a.default({el:"#app",router:re,components:{App:l},template:"<App/>",mounted:function(){this.config=JSON.parse(localStorage.getItem("config")),window.bluetoothOnEvet=document.createEvent("HTMLEvents"),window.bluetoothOffEvet=document.createEvent("HTMLEvents"),window.scanDeviceSuccess=document.createEvent("HTMLEvents"),window.contentSuccess=document.createEvent("HTMLEvents"),window.waitCollectionUpdate=document.createEvent("HTMLEvents"),window.bluetoothOnEvet.initEvent("bluetoothOn",!1,!1),window.bluetoothOffEvet.initEvent("bluetoothOff",!1,!1),window.scanDeviceSuccess.initEvent("scanDeviceSuccess",!1,!1),window.contentSuccess.initEvent("contentSuccess",!1,!1),window.waitCollectionUpdate.initEvent("waitCollectionUpdate",!1,!1),document.addEventListener("bluetoothOn",function(e){localStorage.setItem("isBluetooth","true")}),document.addEventListener("bluetoothOff",function(e){localStorage.setItem("isBluetooth","false")}),window.setTimeout(function(){window.printer.init()},1e3)}})},QetP:function(e,t){},UCys:function(e,t,o){"use strict";var a=o("Enye"),i=o.n(a),n=o("+96y");var s=function(e){o("QetP")},r=o("VU/8")(i.a,n.a,!1,s,"data-v-6a27fbfc",null);t.default=r.exports},XlLT:function(e,t){},eVAA:function(e,t,o){e.exports=o.p+"static/img/scan.41aeac2.gif"},rqsT:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3bb5692cd5e6a0515a10.js.map